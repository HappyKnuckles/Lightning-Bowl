<ion-modal [isOpen]="isOpen" (ionModalDidDismiss)="onDismiss()" class="pwa-install-modal">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Install Lightning Bowl</ion-title>
        <ion-buttons slot="end">
          <ion-button fill="clear" (click)="onDismiss()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    
    <ion-content class="ion-padding">
      <div class="install-content">
        <!-- App Icon and Title -->
        <div class="app-header">
          <img src="assets/icons/android/android-launchericon-192-192.png" alt="Lightning Bowl Icon" class="app-icon">
          <div class="app-info">
            <h2>Lightning Bowl</h2>
            <p>Your ultimate bowling companion</p>
          </div>
        </div>

        <!-- Benefits -->
        <div class="benefits-section">
          <h3>Why install Lightning Bowl?</h3>
          <div class="benefits-grid">
            <div class="benefit-item">
              <ion-icon name="flash" color="primary"></ion-icon>
              <span>Quick Access</span>
            </div>
            <div class="benefit-item">
              <ion-icon name="wifi-outline" color="primary"></ion-icon>
              <span>Works Offline</span>
            </div>
            <div class="benefit-item">
              <ion-icon name="notifications" color="primary"></ion-icon>
              <span>Push Notifications</span>
            </div>
            <div class="benefit-item">
              <ion-icon name="phone-portrait" color="primary"></ion-icon>
              <span>Native Experience</span>
            </div>
          </div>
        </div>

        <!-- Screenshots -->
        <div class="screenshots-section">
          <h3>App Screenshots</h3>
          <div class="screenshots-carousel">
            <div class="screenshot-container">
              <img src="assets/screenshots/start.png" alt="Start Page" class="screenshot">
              <p class="screenshot-caption">Track your games</p>
            </div>
            <div class="screenshot-container">
              <img src="assets/screenshots/stats.png" alt="Statistics Page" class="screenshot">
              <p class="screenshot-caption">View detailed stats</p>
            </div>
            <div class="screenshot-container">
              <img src="assets/screenshots/history.png" alt="History Page" class="screenshot">
              <p class="screenshot-caption">Browse game history</p>
            </div>
          </div>
        </div>

        <!-- Installation Instructions -->
        <div class="instructions-section">
          <h3>How to install:</h3>
          <div class="install-steps">
            <div class="step" *ngIf="isChrome">
              <span class="step-number">1</span>
              <p>Tap "Install" below</p>
            </div>
            <div class="step" *ngIf="isChrome">
              <span class="step-number">2</span>
              <p>Confirm installation in the popup</p>
            </div>
            <div class="step" *ngIf="isChrome">
              <span class="step-number">3</span>
              <p>Find the app on your home screen</p>
            </div>
            
            <!-- iOS Safari Instructions -->
            <div class="ios-instructions" *ngIf="isIOS">
              <div class="step">
                <span class="step-number">1</span>
                <p>Tap the <ion-icon name="share-outline"></ion-icon> share button</p>
              </div>
              <div class="step">
                <span class="step-number">2</span>
                <p>Scroll down and tap "Add to Home Screen"</p>
              </div>
              <div class="step">
                <span class="step-number">3</span>
                <p>Tap "Add" in the top right corner</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ion-content>
    
    <ion-footer>
      <ion-toolbar>
        <div class="action-buttons">
          <ion-button fill="clear" color="medium" (click)="onDismiss()">
            Maybe Later
          </ion-button>
          <ion-button 
            *ngIf="!isIOS" 
            expand="block" 
            color="primary" 
            (click)="onInstall()"
            [disabled]="!canInstall">
            <ion-icon name="download" slot="start"></ion-icon>
            Install App
          </ion-button>
          <ion-button 
            *ngIf="isIOS" 
            expand="block" 
            color="primary" 
            (click)="onDismiss()">
            <ion-icon name="checkmark" slot="start"></ion-icon>
            Got it!
          </ion-button>
        </div>
      </ion-toolbar>
    </ion-footer>
  </ng-template>
</ion-modal>